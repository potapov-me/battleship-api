# Настройка Swagger для Battleship API

## Обзор

Swagger (OpenAPI) был успешно интегрирован в проект для автоматической генерации документации API и удобного тестирования эндпоинтов.

## Что было добавлено

### 1. Зависимости
- `@nestjs/swagger` - основной пакет для интеграции Swagger с NestJS
- `swagger-ui-express` - UI интерфейс для Swagger

### 2. Конфигурация в main.ts
- Настроен DocumentBuilder с метаданными API
- Добавлены теги для группировки эндпоинтов
- Настроена JWT аутентификация
- Swagger UI доступен по адресу `/api`

### 3. DTO с Swagger декораторами

#### Аутентификация (`src/auth/dto/`)
- `LoginDto` - вход в систему
- `RegisterDto` - регистрация пользователя
- `LoginResponseDto` - ответ при входе
- `RegisterResponseDto` - ответ при регистрации
- `ProfileResponseDto` - профиль пользователя
- `ErrorResponseDto` - ошибки

#### Комнаты (`src/game/dto/`)
- `CreateRoomDto` - создание комнаты
- `JoinRoomDto` - присоединение к комнате
- `RoomResponseDto` - информация о комнате
- `ActiveRoomsResponseDto` - список активных комнат

#### Игра (`src/game/dto/`)
- `PlaceShipsDto` - размещение кораблей
- `MakeShotDto` - выполнение выстрела
- `ShotResponseDto` - результат выстрела
- `GameResponseDto` - информация об игре

### 4. Обновленные контроллеры
- `AuthController` - полная документация всех эндпоинтов аутентификации
- `RoomController` - документация эндпоинтов комнат

## Использование

### Доступ к Swagger UI
После запуска приложения Swagger UI доступен по адресу:
```
http://localhost:7001/api
```

### Основные возможности
1. **Интерактивная документация** - все эндпоинты с описанием
2. **Тестирование API** - прямо из браузера
3. **JWT аутентификация** - кнопка "Authorize" для ввода токена
4. **Примеры запросов** - готовые примеры для каждого эндпоинта
5. **Схемы ответов** - полное описание структуры ответов

### Группировка эндпоинтов
- **auth** - аутентификация и регистрация
- **rooms** - управление игровыми комнатами
- **game** - игровая логика
- **players** - управление игроками

### JWT аутентификация
1. Получите токен через `/auth/login` или `/auth/register`
2. Нажмите кнопку "Authorize" в Swagger UI
3. Введите токен в формате: `Bearer <your_token>`
4. Теперь можете тестировать защищенные эндпоинты

## Примеры использования

### Регистрация пользователя
```bash
POST /auth/register
{
  "username": "john_doe",
  "email": "john.doe@example.com",
  "password": "password123"
}
```

### Создание комнаты
```bash
POST /rooms
{
  "userId": "507f1f77bcf86cd799439011",
  "name": "Моя комната"
}
```

### Присоединение к комнате
```bash
POST /rooms/abc123def456/join
{
  "userId": "507f1f77bcf86cd799439012"
}
```

## Преимущества

1. **Автоматическая документация** - всегда актуальная
2. **Интерактивное тестирование** - без Postman/curl
3. **Валидация данных** - проверка типов и форматов
4. **Примеры запросов** - готовые для копирования
5. **Группировка** - логическая организация эндпоинтов
6. **Аутентификация** - удобное управление токенами

## Дальнейшее развитие

- Добавить больше эндпоинтов для игровой логики
- Расширить схемы ответов
- Добавить примеры ошибок
- Настроить кастомные теги для лучшей организации

